<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:Freecost.Desktop.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="640"
        x:Class="Freecost.Desktop.Views.RecipeComparisonWindow"
        x:DataType="vm:RecipeComparisonViewModel"
        Title="Recipe Comparison"
        Width="800"
        Height="640"
        WindowStartupLocation="CenterOwner"
        Background="#F5F5F5">

	<Grid RowDefinitions="Auto,*,Auto" Margin="24">

		<!-- Header -->
		<StackPanel Grid.Row="0" Spacing="8" Margin="0,0,0,20">
			<TextBlock Text="âš–ï¸ Recipe Comparison"
			          FontSize="24"
			          FontWeight="Bold"
			          Foreground="#2D2D2D"/>
			<TextBlock Text="Compare recipes side-by-side for cost, nutrition, and more"
			          FontSize="14"
			          Foreground="#666"/>
		</StackPanel>

		<!-- Content -->
		<ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
			<Border Background="White"
			       CornerRadius="8"
			       Padding="20"
			       BoxShadow="0 2 8 0 #10000000">
				<Grid RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,Auto" RowSpacing="16">

					<!-- Recipe Names Row -->
					<Grid Grid.Row="0" ColumnDefinitions="200,*,*,*" ColumnSpacing="16">
						<TextBlock Grid.Column="0"
						          Text="Recipe"
						          FontSize="14"
						          FontWeight="Bold"
						          Foreground="#2D2D2D"
						          VerticalAlignment="Center"/>
						<ItemsControl Grid.Column="1"
						             Grid.ColumnSpan="3"
						             ItemsSource="{Binding Recipes}">
							<ItemsControl.ItemsPanel>
								<ItemsPanelTemplate>
									<UniformGrid Columns="3"/>
								</ItemsPanelTemplate>
							</ItemsControl.ItemsPanel>
							<ItemsControl.ItemTemplate>
								<DataTemplate>
									<Border Background="#E3F2FD"
									       CornerRadius="6"
									       Padding="12"
									       Margin="0,0,8,0">
										<TextBlock Text="{Binding Name}"
										          FontSize="15"
										          FontWeight="SemiBold"
										          Foreground="#1976D2"
										          TextWrapping="Wrap"/>
									</Border>
								</DataTemplate>
							</ItemsControl.ItemTemplate>
						</ItemsControl>
					</Grid>

					<!-- Separator -->
					<Separator Grid.Row="1" Height="1" Background="#E0E0E0"/>

					<!-- Cost Section -->
					<StackPanel Grid.Row="2" Spacing="12">
						<TextBlock Text="ðŸ’° Cost Analysis"
						          FontSize="16"
						          FontWeight="SemiBold"
						          Foreground="#2D2D2D"/>

						<!-- Total Cost -->
						<Grid ColumnDefinitions="200,*,*,*" ColumnSpacing="16">
							<TextBlock Grid.Column="0"
							          Text="Total Cost"
							          FontSize="13"
							          Foreground="#666"
							          VerticalAlignment="Center"/>
							<ItemsControl Grid.Column="1"
							             Grid.ColumnSpan="3"
							             ItemsSource="{Binding Recipes}">
								<ItemsControl.ItemsPanel>
									<ItemsPanelTemplate>
										<UniformGrid Columns="3"/>
									</ItemsPanelTemplate>
								</ItemsControl.ItemsPanel>
								<ItemsControl.ItemTemplate>
									<DataTemplate>
										<TextBlock Text="{Binding TotalCost, StringFormat='{}{0:C2}'}"
										          FontSize="18"
										          FontWeight="Bold"
										          Foreground="#FF9800"
										          Margin="0,0,8,0"/>
									</DataTemplate>
								</ItemsControl.ItemTemplate>
							</ItemsControl>
						</Grid>

						<!-- Cost Per Serving -->
						<Grid ColumnDefinitions="200,*,*,*" ColumnSpacing="16">
							<TextBlock Grid.Column="0"
							          Text="Cost Per Serving"
							          FontSize="13"
							          Foreground="#666"
							          VerticalAlignment="Center"/>
							<ItemsControl Grid.Column="1"
							             Grid.ColumnSpan="3"
							             ItemsSource="{Binding Recipes}">
								<ItemsControl.ItemsPanel>
									<ItemsPanelTemplate>
										<UniformGrid Columns="3"/>
									</ItemsPanelTemplate>
								</ItemsControl.ItemsPanel>
								<ItemsControl.ItemTemplate>
									<DataTemplate>
										<TextBlock Text="{Binding CostPerServing, StringFormat='{}{0:C2}'}"
										          FontSize="14"
										          Foreground="#2196F3"
										          Margin="0,0,8,0"/>
									</DataTemplate>
								</ItemsControl.ItemTemplate>
							</ItemsControl>
						</Grid>

						<!-- Yield -->
						<Grid ColumnDefinitions="200,*,*,*" ColumnSpacing="16">
							<TextBlock Grid.Column="0"
							          Text="Yield"
							          FontSize="13"
							          Foreground="#666"
							          VerticalAlignment="Center"/>
							<ItemsControl Grid.Column="1"
							             Grid.ColumnSpan="3"
							             ItemsSource="{Binding Recipes}">
								<ItemsControl.ItemsPanel>
									<ItemsPanelTemplate>
										<UniformGrid Columns="3"/>
									</ItemsPanelTemplate>
								</ItemsControl.ItemsPanel>
								<ItemsControl.ItemTemplate>
									<DataTemplate>
										<TextBlock FontSize="13" Foreground="#666" Margin="0,0,8,0">
											<Run Text="{Binding Yield, StringFormat='{}{0:F1}'}"/>
											<Run Text=" "/>
											<Run Text="{Binding YieldUnit}"/>
										</TextBlock>
									</DataTemplate>
								</ItemsControl.ItemTemplate>
							</ItemsControl>
						</Grid>
					</StackPanel>

					<!-- Separator -->
					<Separator Grid.Row="3" Height="1" Background="#E0E0E0"/>

					<!-- Nutrition Section -->
					<StackPanel Grid.Row="4" Spacing="12" IsVisible="{Binding HasNutrition}">
						<TextBlock Text="ðŸ¥— Nutritional Information (per serving)"
						          FontSize="16"
						          FontWeight="SemiBold"
						          Foreground="#2D2D2D"/>

						<!-- Calories -->
						<Grid ColumnDefinitions="200,*,*,*" ColumnSpacing="16">
							<TextBlock Grid.Column="0"
							          Text="Calories"
							          FontSize="13"
							          Foreground="#666"
							          VerticalAlignment="Center"/>
							<ItemsControl Grid.Column="1"
							             Grid.ColumnSpan="3"
							             ItemsSource="{Binding Recipes}">
								<ItemsControl.ItemsPanel>
									<ItemsPanelTemplate>
										<UniformGrid Columns="3"/>
									</ItemsPanelTemplate>
								</ItemsControl.ItemsPanel>
								<ItemsControl.ItemTemplate>
									<DataTemplate>
										<TextBlock Text="{Binding CaloriesDisplay}"
										          FontSize="14"
										          Foreground="#666"
										          Margin="0,0,8,0"/>
									</DataTemplate>
								</ItemsControl.ItemTemplate>
							</ItemsControl>
						</Grid>

						<!-- Protein -->
						<Grid ColumnDefinitions="200,*,*,*" ColumnSpacing="16">
							<TextBlock Grid.Column="0"
							          Text="Protein"
							          FontSize="13"
							          Foreground="#666"
							          VerticalAlignment="Center"/>
							<ItemsControl Grid.Column="1"
							             Grid.ColumnSpan="3"
							             ItemsSource="{Binding Recipes}">
								<ItemsControl.ItemsPanel>
									<ItemsPanelTemplate>
										<UniformGrid Columns="3"/>
									</ItemsPanelTemplate>
								</ItemsControl.ItemsPanel>
								<ItemsControl.ItemTemplate>
									<DataTemplate>
										<TextBlock Text="{Binding ProteinDisplay}"
										          FontSize="14"
										          Foreground="#666"
										          Margin="0,0,8,0"/>
									</DataTemplate>
								</ItemsControl.ItemTemplate>
							</ItemsControl>
						</Grid>

						<!-- Carbohydrates -->
						<Grid ColumnDefinitions="200,*,*,*" ColumnSpacing="16">
							<TextBlock Grid.Column="0"
							          Text="Carbohydrates"
							          FontSize="13"
							          Foreground="#666"
							          VerticalAlignment="Center"/>
							<ItemsControl Grid.Column="1"
							             Grid.ColumnSpan="3"
							             ItemsSource="{Binding Recipes}">
								<ItemsControl.ItemsPanel>
									<ItemsPanelTemplate>
										<UniformGrid Columns="3"/>
									</ItemsPanelTemplate>
								</ItemsControl.ItemsPanel>
								<ItemsControl.ItemTemplate>
									<DataTemplate>
										<TextBlock Text="{Binding CarbsDisplay}"
										          FontSize="14"
										          Foreground="#666"
										          Margin="0,0,8,0"/>
									</DataTemplate>
								</ItemsControl.ItemTemplate>
							</ItemsControl>
						</Grid>

						<!-- Fat -->
						<Grid ColumnDefinitions="200,*,*,*" ColumnSpacing="16">
							<TextBlock Grid.Column="0"
							          Text="Fat"
							          FontSize="13"
							          Foreground="#666"
							          VerticalAlignment="Center"/>
							<ItemsControl Grid.Column="1"
							             Grid.ColumnSpan="3"
							             ItemsSource="{Binding Recipes}">
								<ItemsControl.ItemsPanel>
									<ItemsPanelTemplate>
										<UniformGrid Columns="3"/>
									</ItemsPanelTemplate>
								</ItemsControl.ItemsPanel>
								<ItemsControl.ItemTemplate>
									<DataTemplate>
										<TextBlock Text="{Binding FatDisplay}"
										          FontSize="14"
										          Foreground="#666"
										          Margin="0,0,8,0"/>
									</DataTemplate>
								</ItemsControl.ItemTemplate>
							</ItemsControl>
						</Grid>
					</StackPanel>

					<!-- Separator -->
					<Separator Grid.Row="5" Height="1" Background="#E0E0E0"/>

					<!-- Other Info Section -->
					<StackPanel Grid.Row="6" Spacing="12">
						<TextBlock Text="ðŸ“‹ Other Information"
						          FontSize="16"
						          FontWeight="SemiBold"
						          Foreground="#2D2D2D"/>

						<!-- Difficulty -->
						<Grid ColumnDefinitions="200,*,*,*" ColumnSpacing="16">
							<TextBlock Grid.Column="0"
							          Text="Difficulty"
							          FontSize="13"
							          Foreground="#666"
							          VerticalAlignment="Center"/>
							<ItemsControl Grid.Column="1"
							             Grid.ColumnSpan="3"
							             ItemsSource="{Binding Recipes}">
								<ItemsControl.ItemsPanel>
									<ItemsPanelTemplate>
										<UniformGrid Columns="3"/>
									</ItemsPanelTemplate>
								</ItemsControl.ItemsPanel>
								<ItemsControl.ItemTemplate>
									<DataTemplate>
										<TextBlock Text="{Binding DifficultyDisplay}"
										          FontSize="13"
										          Foreground="#666"
										          Margin="0,0,8,0"/>
									</DataTemplate>
								</ItemsControl.ItemTemplate>
							</ItemsControl>
						</Grid>

						<!-- Prep Time -->
						<Grid ColumnDefinitions="200,*,*,*" ColumnSpacing="16">
							<TextBlock Grid.Column="0"
							          Text="Prep Time"
							          FontSize="13"
							          Foreground="#666"
							          VerticalAlignment="Center"/>
							<ItemsControl Grid.Column="1"
							             Grid.ColumnSpan="3"
							             ItemsSource="{Binding Recipes}">
								<ItemsControl.ItemsPanel>
									<ItemsPanelTemplate>
										<UniformGrid Columns="3"/>
									</ItemsPanelTemplate>
								</ItemsControl.ItemsPanel>
								<ItemsControl.ItemTemplate>
									<DataTemplate>
										<TextBlock Text="{Binding PrepTimeDisplay}"
										          FontSize="13"
										          Foreground="#666"
										          Margin="0,0,8,0"/>
									</DataTemplate>
								</ItemsControl.ItemTemplate>
							</ItemsControl>
						</Grid>

						<!-- Ingredient Count -->
						<Grid ColumnDefinitions="200,*,*,*" ColumnSpacing="16">
							<TextBlock Grid.Column="0"
							          Text="Ingredients"
							          FontSize="13"
							          Foreground="#666"
							          VerticalAlignment="Center"/>
							<ItemsControl Grid.Column="1"
							             Grid.ColumnSpan="3"
							             ItemsSource="{Binding Recipes}">
								<ItemsControl.ItemsPanel>
									<ItemsPanelTemplate>
										<UniformGrid Columns="3"/>
									</ItemsPanelTemplate>
								</ItemsControl.ItemsPanel>
								<ItemsControl.ItemTemplate>
									<DataTemplate>
										<TextBlock Text="{Binding IngredientCount}"
										          FontSize="13"
										          Foreground="#666"
										          Margin="0,0,8,0"/>
									</DataTemplate>
								</ItemsControl.ItemTemplate>
							</ItemsControl>
						</Grid>
					</StackPanel>

				</Grid>
			</Border>
		</ScrollViewer>

		<!-- Buttons -->
		<StackPanel Grid.Row="2"
		           Orientation="Horizontal"
		           HorizontalAlignment="Right"
		           Spacing="12"
		           Margin="0,20,0,0">
			<Button Content="Close"
			       Click="OnCloseClick"
			       Background="#90A4AE"
			       Foreground="White"
			       Padding="24,10"
			       CornerRadius="4"
			       FontWeight="SemiBold"
			       FontSize="14"/>
		</StackPanel>

	</Grid>
</Window>
