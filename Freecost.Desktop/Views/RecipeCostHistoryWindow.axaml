<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:Freecost.Desktop.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
        x:Class="Freecost.Desktop.Views.RecipeCostHistoryWindow"
        x:DataType="vm:RecipeCostHistoryViewModel"
        Title="Recipe Cost History"
        Width="800"
        Height="600"
        WindowStartupLocation="CenterOwner"
        Icon="/Assets/Images/appicon.png">

	<Grid RowDefinitions="Auto,*,Auto" Margin="24">

		<!-- Header -->
		<StackPanel Grid.Row="0" Spacing="8" Margin="0,0,0,24">
			<TextBlock Text="ðŸ“Š Recipe Cost History"
			          FontSize="24"
			          FontWeight="Bold"
			          Foreground="#2D2D2D"/>
			<TextBlock Text="{Binding RecipeName}"
			          FontSize="16"
			          FontWeight="SemiBold"
			          Foreground="#666"/>
			<Grid ColumnDefinitions="Auto,*,Auto">
				<TextBlock Grid.Column="0"
				          Text="{Binding DateRange}"
				          FontSize="12"
				          Foreground="#999"/>
				<TextBlock Grid.Column="2"
				          Text="{Binding CurrentCost, StringFormat='Current Cost: {0}'}"
				          FontSize="12"
				          FontWeight="SemiBold"
				          Foreground="#2196F3"/>
			</Grid>
		</StackPanel>

		<!-- Chart Area -->
		<Border Grid.Row="1"
		        Background="White"
		        CornerRadius="8"
		        Padding="16"
		        BoxShadow="0 2 8 0 #10000000">
			<Grid>
				<!-- Loading Indicator -->
				<StackPanel IsVisible="{Binding IsLoading}"
				           VerticalAlignment="Center"
				           HorizontalAlignment="Center"
				           Spacing="16">
					<TextBlock Text="â³"
					          FontSize="48"
					          HorizontalAlignment="Center"/>
					<TextBlock Text="Loading cost history..."
					          FontSize="16"
					          HorizontalAlignment="Center"
					          Foreground="#666"/>
				</StackPanel>

				<!-- No Data Message -->
				<StackPanel IsVisible="{Binding !HasData}"
				           VerticalAlignment="Center"
				           HorizontalAlignment="Center"
				           Spacing="16">
					<TextBlock Text="ðŸ“ˆ"
					          FontSize="64"
					          HorizontalAlignment="Center"/>
					<TextBlock Text="No price history available"
					          FontSize="20"
					          FontWeight="SemiBold"
					          HorizontalAlignment="Center"
					          Foreground="#2D2D2D"/>
					<TextBlock Text="Price history is recorded when ingredient prices change"
					          FontSize="14"
					          HorizontalAlignment="Center"
					          Foreground="#666"
					          TextAlignment="Center"
					          MaxWidth="400"
					          TextWrapping="Wrap"/>
				</StackPanel>

				<!-- Chart (will be added in code-behind) -->
				<Border x:Name="ChartContainer"
				        IsVisible="{Binding HasData}"/>
			</Grid>
		</Border>

		<!-- Footer -->
		<Grid Grid.Row="2" ColumnDefinitions="*,Auto" Margin="0,16,0,0">
			<TextBlock Grid.Column="0"
			          Text="ðŸ’¡ Tip: Track ingredient price changes to see cost trends"
			          FontSize="11"
			          Foreground="#999"
			          VerticalAlignment="Center"/>
			<Button Grid.Column="1"
			        Content="Close"
			        Click="OnCloseClicked"
			        Background="#90CAF9"
			        Foreground="White"
			        Padding="24,10"
			        CornerRadius="4"
			        FontWeight="SemiBold"/>
		</Grid>

	</Grid>
</Window>
