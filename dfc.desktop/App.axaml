<Application xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="Dfc.Desktop.App"
             xmlns:local="using:Dfc.Desktop"
             xmlns:converters="using:Dfc.Desktop.Converters"
             RequestedThemeVariant="Light">

	<Application.DataTemplates>
		<local:ViewLocator/>
	</Application.DataTemplates>

	<Application.Resources>
		<converters:RoleToStringConverter x:Key="RoleToStringConverter"/>
		<converters:BoolToActiveButtonConverter x:Key="BoolToActiveButtonConverter"/>
		<converters:BoolToStatusColorConverter x:Key="BoolToStatusColorConverter"/>
		<converters:BoolToColorConverter x:Key="BoolToColorConverter"/>
		<converters:IntEqualityConverter x:Key="IntEqualityConverter"/>
		<converters:StepIndicatorConverter x:Key="StepIndicatorConverter"/>
		<converters:StepBorderConverter x:Key="StepBorderConverter"/>

		<!-- Modern Design Tokens -->
		<SolidColorBrush x:Key="BrandPrimary">#7AB51D</SolidColorBrush>
		<SolidColorBrush x:Key="BrandPrimaryHover">#6AA50D</SolidColorBrush>
		<SolidColorBrush x:Key="BrandPrimaryLight">#E8F5D9</SolidColorBrush>
		<SolidColorBrush x:Key="TextPrimary">#2D2D2D</SolidColorBrush>
		<SolidColorBrush x:Key="TextSecondary">#666666</SolidColorBrush>
		<SolidColorBrush x:Key="TextTertiary">#999999</SolidColorBrush>
		<SolidColorBrush x:Key="BackgroundPrimary">#FFFFFF</SolidColorBrush>
		<SolidColorBrush x:Key="BackgroundSecondary">#F9F9F9</SolidColorBrush>
		<SolidColorBrush x:Key="BackgroundTertiary">#F5F5F5</SolidColorBrush>
		<SolidColorBrush x:Key="BorderPrimary">#E0E0E0</SolidColorBrush>
		<SolidColorBrush x:Key="BorderSecondary">#D0D0D0</SolidColorBrush>
		<SolidColorBrush x:Key="Success">#4CAF50</SolidColorBrush>
		<SolidColorBrush x:Key="Warning">#FF9800</SolidColorBrush>
		<SolidColorBrush x:Key="Error">#EF5350</SolidColorBrush>
		<SolidColorBrush x:Key="Info">#2196F3</SolidColorBrush>
	</Application.Resources>

	<Application.Styles>
		<FluentTheme />
		<StyleInclude Source="avares://Avalonia.Controls.DataGrid/Themes/Fluent.xaml"/>

	<!-- FRESH TEXTBOX - Custom template, light theme, zero visual effects -->
	<Style Selector="TextBox">
		<Setter Property="Foreground" Value="#2D2D2D"/>
		<Setter Property="FontSize" Value="13"/>
		<Setter Property="Padding" Value="8"/>
		<Setter Property="Template">
			<ControlTemplate>
				<Border Background="#FAFAFA"
				        BorderBrush="#D0D0D0"
				        BorderThickness="1"
				        CornerRadius="4">
					<ScrollViewer HorizontalScrollBarVisibility="Hidden"
					             VerticalScrollBarVisibility="Hidden"
					             VerticalAlignment="Center">
						<TextPresenter Name="PART_TextPresenter"
						              Text="{TemplateBinding Text}"
						              CaretIndex="{TemplateBinding CaretIndex}"
						              SelectionStart="{TemplateBinding SelectionStart}"
						              SelectionEnd="{TemplateBinding SelectionEnd}"
						              CaretBrush="#2D2D2D"
						              SelectionBrush="#7AB51D"
						              SelectionForegroundBrush="White"
						              Foreground="#2D2D2D"
						              VerticalAlignment="Center"
						              PasswordChar="{TemplateBinding PasswordChar}"
						              RevealPassword="{TemplateBinding RevealPassword}"/>
					</ScrollViewer>
				</Border>
			</ControlTemplate>
		</Setter>
	</Style>
	
	<!-- Focus state: White background, green border with smooth transition -->
	<Style Selector="TextBox:focus /template/ Border">
		<Setter Property="Background" Value="White"/>
		<Setter Property="BorderBrush" Value="#7AB51D"/>
	</Style>

	<!-- Smooth transitions for TextBox -->
	<Style Selector="TextBox /template/ Border">
		<Setter Property="Transitions">
			<Transitions>
				<BrushTransition Property="Background" Duration="0:0:0.15"/>
				<BrushTransition Property="BorderBrush" Duration="0:0:0.15"/>
			</Transitions>
		</Setter>
	</Style>

	<!-- FRESH COMBOBOX - Light theme, simple property overrides -->
	<Style Selector="ComboBox">
		<Setter Property="Background" Value="#FAFAFA"/>
		<Setter Property="BorderBrush" Value="#D0D0D0"/>
		<Setter Property="BorderThickness" Value="1"/>
		<Setter Property="Foreground" Value="#2D2D2D"/>
		<Setter Property="Padding" Value="8"/>
		<Setter Property="CornerRadius" Value="4"/>
		<Setter Property="FontSize" Value="13"/>
	</Style>
	
	<!-- ComboBox focus state -->
	<Style Selector="ComboBox:focus">
		<Setter Property="Background" Value="White"/>
		<Setter Property="BorderBrush" Value="#7AB51D"/>
	</Style>

	<!-- Smooth transitions for ComboBox -->
	<Style Selector="ComboBox">
		<Setter Property="Transitions">
			<Transitions>
				<BrushTransition Property="Background" Duration="0:0:0.15"/>
				<BrushTransition Property="BorderBrush" Duration="0:0:0.15"/>
			</Transitions>
		</Setter>
	</Style>
	
	<!-- ComboBox dropdown items - light theme -->
	<Style Selector="ComboBoxItem">
		<Setter Property="Background" Value="White"/>
		<Setter Property="Foreground" Value="#2D2D2D"/>
		<Setter Property="Padding" Value="8"/>
	</Style>
	
	<!-- ComboBoxItem hover - light gray, NOT dark -->
	<Style Selector="ComboBoxItem:pointerover">
		<Setter Property="Background" Value="#F0F0F0"/>
		<Setter Property="Foreground" Value="#2D2D2D"/>
	</Style>

	<!-- ComboBoxItem selected - light green -->
	<Style Selector="ComboBoxItem:selected">
		<Setter Property="Background" Value="#E8F5E9"/>
		<Setter Property="Foreground" Value="#2D2D2D"/>
	</Style>

	<!-- Smooth transitions for ComboBoxItem -->
	<Style Selector="ComboBoxItem">
		<Setter Property="Transitions">
			<Transitions>
				<BrushTransition Property="Background" Duration="0:0:0.15"/>
			</Transitions>
		</Setter>
	</Style>

	<!-- ComboBox dropdown Popup - Override FluentTheme's dark background -->
	<Style Selector="ComboBox /template/ Popup#PART_Popup Border">
		<Setter Property="Background" Value="White"/>
		<Setter Property="BorderBrush" Value="#D0D0D0"/>
	</Style>







		<!-- Light button styling -->
		<Style Selector="Button">
			<Setter Property="Background" Value="#F5F5F5"/>
			<Setter Property="Foreground" Value="#555555"/>
			<Setter Property="BorderBrush" Value="#E0E0E0"/>
			<Setter Property="CornerRadius" Value="4"/>
		</Style>
		<Style Selector="Button:pointerover /template/ ContentPresenter">
			<Setter Property="Background" Value="#D0D0D0"/>
		</Style>

		<!-- Smooth transitions for buttons -->
		<Style Selector="Button /template/ ContentPresenter">
			<Setter Property="Transitions">
				<Transitions>
					<BrushTransition Property="Background" Duration="0:0:0.2"/>
					<TransformOperationsTransition Property="RenderTransform" Duration="0:0:0.1"/>
				</Transitions>
			</Setter>
		</Style>

		<!-- Subtle press effect -->
		<Style Selector="Button:pressed /template/ ContentPresenter">
			<Setter Property="RenderTransform" Value="scale(0.98)"/>
		</Style>

		<!-- Modern primary buttons with subtle elevation -->
		<Style Selector="Button.primary">
			<Setter Property="Background" Value="{StaticResource BrandPrimary}"/>
			<Setter Property="Foreground" Value="White"/>
			<Setter Property="BorderThickness" Value="0"/>
			<Setter Property="Padding" Value="16,10"/>
			<Setter Property="CornerRadius" Value="6"/>
			<Setter Property="FontWeight" Value="SemiBold"/>
		</Style>
		<Style Selector="Button.primary:pointerover /template/ ContentPresenter">
			<Setter Property="Background" Value="{StaticResource BrandPrimaryHover}"/>
		</Style>
		<Style Selector="Button.primary:pressed /template/ ContentPresenter">
			<Setter Property="RenderTransform" Value="scale(0.98)"/>
		</Style>

		<!-- Modern secondary buttons -->
		<Style Selector="Button.secondary">
			<Setter Property="Background" Value="{StaticResource BackgroundPrimary}"/>
			<Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
			<Setter Property="BorderBrush" Value="{StaticResource BorderPrimary}"/>
			<Setter Property="BorderThickness" Value="1"/>
			<Setter Property="Padding" Value="16,10"/>
			<Setter Property="CornerRadius" Value="6"/>
		</Style>
		<Style Selector="Button.secondary:pointerover">
			<Setter Property="Background" Value="{StaticResource BackgroundSecondary}"/>
		</Style>

		<!-- Universal DataGrid Styles -->
		<Style Selector="DataGridColumnHeader">
			<Setter Property="Foreground" Value="#2D2D2D"/>
			<Setter Property="FontWeight" Value="SemiBold"/>
			<Setter Property="Background" Value="#F5F5F5"/>
		</Style>

		<Style Selector="DataGridCell">
			<Setter Property="Foreground" Value="#2D2D2D"/>
		</Style>

		<!-- Hide the focus rectangle -->
		<Style Selector="DataGridCell:focus /template/ Grid#FocusVisual">
			<Setter Property="IsVisible" Value="False"/>
		</Style>

		<!-- Row backgrounds -->
		<Style Selector="DataGridRow">
			<Setter Property="Background" Value="White"/>
		</Style>

		<Style Selector="DataGridRow:selected /template/ Rectangle#BackgroundRectangle">
			<Setter Property="Fill" Value="#E8F5E9"/>
			<Setter Property="Opacity" Value="1"/>
		</Style>

		<Style Selector="DataGridRow:pointerover /template/ Rectangle#BackgroundRectangle">
			<Setter Property="Fill" Value="#F5F5F5"/>
		</Style>

		<!-- Smooth transitions for DataGrid rows -->
		<Style Selector="DataGridRow /template/ Rectangle#BackgroundRectangle">
			<Setter Property="Transitions">
				<Transitions>
					<BrushTransition Property="Fill" Duration="0:0:0.15"/>
				</Transitions>
			</Setter>
		</Style>

		<!-- Keep text dark even when selected -->
		<Style Selector="DataGridRow:selected DataGridCell">
			<Setter Property="Foreground" Value="#2D2D2D"/>
		</Style>

		<!-- Keep text dark on hover -->
		<Style Selector="DataGridRow:pointerover DataGridCell">
			<Setter Property="Foreground" Value="#2D2D2D"/>
		</Style>

		<Style Selector="DataGridCell:pointerover">
			<Setter Property="Foreground" Value="#2D2D2D"/>
		</Style>

		<!-- Target TextBlocks inside cells to prevent white text -->
		<Style Selector="DataGridCell TextBlock">
			<Setter Property="Foreground" Value="#2D2D2D"/>
		</Style>

		<Style Selector="DataGridCell:pointerover TextBlock">
			<Setter Property="Foreground" Value="#2D2D2D"/>
		</Style>

		<Style Selector="DataGridRow:pointerover DataGridCell TextBlock">
			<Setter Property="Foreground" Value="#2D2D2D"/>
		</Style>

	<!-- FRESH CHECKBOX - Zero visual effects, built from scratch -->
	<Style Selector="CheckBox">
		<Setter Property="Foreground" Value="#2D2D2D"/>
		<Setter Property="FontSize" Value="13"/>
		<Setter Property="Cursor" Value="Arrow"/>
		<Setter Property="Template">
			<ControlTemplate>
				<Grid ColumnDefinitions="Auto,*">
					<!-- Checkbox square - NEVER changes appearance -->
					<Border x:Name="CheckBoxBorder"
					        Grid.Column="0"
					        Width="18" Height="18"
					        BorderBrush="#888888"
					        BorderThickness="2"
					        Background="White"
					        CornerRadius="3"
					        Margin="0,0,8,0"
					        VerticalAlignment="Center">
						<!-- Checkmark Path - only visible when checked -->
						<Path x:Name="CheckMark"
						      Width="10" Height="10"
						      Stretch="Uniform"
						      Data="M 0,5 L 3,8 L 8,0"
						      Stroke="White"
						      StrokeThickness="2"
						      IsVisible="False"/>
					</Border>
					
					<!-- Label text -->
					<ContentPresenter Grid.Column="1"
					                 Content="{TemplateBinding Content}"
					                 VerticalAlignment="Center"
					                 Foreground="#2D2D2D"/>
				</Grid>
			</ControlTemplate>
		</Setter>
	</Style>
	
	<!-- Checked state: Green border, green background, show checkmark -->
	<Style Selector="CheckBox:checked /template/ Border#CheckBoxBorder">
		<Setter Property="BorderBrush" Value="#7AB51D"/>
		<Setter Property="Background" Value="#7AB51D"/>
	</Style>
	
	<Style Selector="CheckBox:checked /template/ Path#CheckMark">
		<Setter Property="IsVisible" Value="True"/>
	</Style>


		<!-- Universal text visibility fix - prevent white text on hover -->
		<Style Selector="Border:pointerover TextBlock">
			<Setter Property="Foreground" Value="#2D2D2D"/>
		</Style>



		<!-- Slider Styles - App green theme -->

		<Style Selector="Slider /template/ Thumb">
			<Setter Property="Background" Value="#7AB51D"/>
			<Setter Property="BorderBrush" Value="#6AA50D"/>
			<Setter Property="BorderThickness" Value="2"/>
		</Style>

		<Style Selector="Slider:pointerover /template/ Thumb">
			<Setter Property="Background" Value="#8BC34A"/>
		</Style>

		<!-- ScrollViewer Styles - Global padding to prevent overlap -->
		<Style Selector="ScrollViewer">
			<Setter Property="Padding" Value="0,0,8,0"/>
		</Style>

		<!-- Window fade-in animation -->
		<Style Selector="Window">
			<Style.Animations>
				<Animation Duration="0:0:0.25" FillMode="Forward">
					<KeyFrame Cue="0%">
						<Setter Property="Opacity" Value="0"/>
					</KeyFrame>
					<KeyFrame Cue="100%">
						<Setter Property="Opacity" Value="1"/>
					</KeyFrame>
				</Animation>
			</Style.Animations>
		</Style>

		<!-- Border hover transitions (for cards/panels) -->
		<Style Selector="Border">
			<Setter Property="Transitions">
				<Transitions>
					<BrushTransition Property="Background" Duration="0:0:0.2"/>
					<BrushTransition Property="BorderBrush" Duration="0:0:0.2"/>
					<DoubleTransition Property="Opacity" Duration="0:0:0.2"/>
				</Transitions>
			</Setter>
		</Style>

		<!-- TabItem transitions -->
		<Style Selector="TabItem">
			<Setter Property="Transitions">
				<Transitions>
					<BrushTransition Property="Foreground" Duration="0:0:0.15"/>
				</Transitions>
			</Setter>
		</Style>

	</Application.Styles>
</Application>
