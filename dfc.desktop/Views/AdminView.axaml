<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:Dfc.Desktop.ViewModels"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="1000" d:DesignHeight="700"
             x:Class="Dfc.Desktop.Views.AdminView"
             x:DataType="vm:AdminViewModel"
             Background="#F5F5F5">

	<ScrollViewer Padding="24" VerticalScrollBarVisibility="Auto">
		<StackPanel Spacing="24" MaxWidth="900">

			<StackPanel Spacing="8">
				<TextBlock Text="ðŸ‘‘ Admin Dashboard"
                           FontSize="28"
                           FontWeight="Bold"
                           Foreground="#2D2D2D"/>
				<TextBlock Text="Manage locations, users, and approval workflows across your organization"
                           FontSize="14"
                           Foreground="#666"/>
			</StackPanel>



			<!-- Approval Workflows Section -->
			<Border Background="White"
			        CornerRadius="8"
			        Padding="24"
			        BoxShadow="0 2 8 0 #10000000">
				<StackPanel Spacing="16">
					<StackPanel Orientation="Horizontal" Spacing="12">
						<TextBlock Text="âœ…" FontSize="24" VerticalAlignment="Center"/>
						<TextBlock Text="Approval Workflows"
						           FontSize="18"
						           FontWeight="SemiBold"
						           Foreground="#2D2D2D"
						           VerticalAlignment="Center"/>
					</StackPanel>

					<TextBlock Text="Review and approve pending changes. Track approval requests for ingredients, recipes, and menu items. Manage workflow status and provide feedback."
					           Foreground="#666"
					           TextWrapping="Wrap"/>

					<Border Background="#FFF3E0"
					        BorderBrush="#FF6F00"
					        BorderThickness="1"
					        CornerRadius="4"
					        Padding="12"
					        Margin="0,4,0,0">
						<StackPanel Spacing="6">
							<TextBlock Text="ðŸ’¡ Workflow Features:"
							          FontWeight="SemiBold"
							          Foreground="#E65100"
							          FontSize="13"/>
							<TextBlock Text="â€¢ Review pending ingredient price changes"
							          Foreground="#E65100"
							          FontSize="11"/>
							<TextBlock Text="â€¢ Approve or reject recipe modifications"
							          Foreground="#E65100"
							          FontSize="11"/>
							<TextBlock Text="â€¢ Track approval history and audit trail"
							          Foreground="#E65100"
							          FontSize="11"/>
							<TextBlock Text="â€¢ Add comments and feedback on requests"
							          Foreground="#E65100"
							          FontSize="11"/>
						</StackPanel>
					</Border>

					<Button Content="âœ… Manage Approvals"
					        Command="{Binding ManageApprovalsCommand}"
					        Background="#FF6F00"
					        Foreground="White"
					        Padding="16,10"
					        CornerRadius="4"
					        FontWeight="SemiBold"
					        HorizontalAlignment="Left"
					        ToolTip.Tip="View and manage approval workflows"/>
				</StackPanel>
			</Border>

			<!-- Reset Tutorial Progress Section -->
			<Border Background="White"
			        CornerRadius="8"
			        Padding="24"
			        BoxShadow="0 2 8 0 #10000000">
				<StackPanel Spacing="16">
					<StackPanel Orientation="Horizontal" Spacing="12">
						<TextBlock Text="ðŸ”„" FontSize="24" VerticalAlignment="Center"/>
						<TextBlock Text="Tutorial Progress"
						           FontSize="18"
						           FontWeight="SemiBold"
						           Foreground="#2D2D2D"
						           VerticalAlignment="Center"/>
					</StackPanel>

					<TextBlock Text="Reset all tutorial module progress. This will clear all completed steps and reset status indicators to red. Useful for testing the tutorial system."
					           Foreground="#666"
					           TextWrapping="Wrap"/>

					<Border Background="#FFE0E0"
					        BorderBrush="#D32F2F"
					        BorderThickness="1"
					        CornerRadius="4"
					        Padding="12"
					        Margin="0,4,0,0">
						<StackPanel Spacing="6">
							<TextBlock Text="âš ï¸ Warning:"
							          FontWeight="SemiBold"
							          Foreground="#C62828"
							          FontSize="13"/>
							<TextBlock Text="â€¢ This will clear all tutorial progress data"
							          Foreground="#C62828"
							          FontSize="11"/>
							<TextBlock Text="â€¢ All module status lights will reset to ðŸ”´ red"
							          Foreground="#C62828"
							          FontSize="11"/>
							<TextBlock Text="â€¢ User will need to retake tutorials from scratch"
							          Foreground="#C62828"
							          FontSize="11"/>
						</StackPanel>
					</Border>

					<Button Content="ðŸ”„ Reset Tutorial Progress"
					        Command="{Binding ResetTutorialProgressCommand}"
					        Background="#D32F2F"
					        Foreground="White"
					        Padding="16,10"
					        CornerRadius="4"
					        FontWeight="SemiBold"
					        HorizontalAlignment="Left"
					        ToolTip.Tip="Clear all tutorial progress (for testing)"/>
				</StackPanel>
			</Border>

			<!-- Bug Reports Section -->
			<Border Background="White"
			        CornerRadius="8"
			        Padding="24"
			        BoxShadow="0 2 8 0 #10000000">
				<StackPanel Spacing="16">
					<Grid ColumnDefinitions="*,Auto">
						<StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="12">
							<TextBlock Text="ðŸ›" FontSize="24" VerticalAlignment="Center"/>
							<TextBlock Text="Bug Reports"
							           FontSize="18"
							           FontWeight="SemiBold"
							           Foreground="#2D2D2D"
							           VerticalAlignment="Center"/>
						</StackPanel>

						<Button Grid.Column="1"
						        Content="ðŸ”„ Refresh"
						        Command="{Binding RefreshBugReportsCommand}"
						        Background="#7AB51D"
						        Foreground="White"
						        Padding="12,6"
						        CornerRadius="4"
						        FontSize="12"/>
					</Grid>

					<TextBlock Text="View all submitted bug reports from users. Review diagnostic data and user feedback."
					           Foreground="#666"
					           TextWrapping="Wrap"/>

					<DataGrid ItemsSource="{Binding BugReports}"
					          SelectedItem="{Binding SelectedBugReport}"
					          IsReadOnly="True"
					          AutoGenerateColumns="False"
					          GridLinesVisibility="Horizontal"
					          HeadersVisibility="Column"
					          MaxHeight="400"
					          BorderBrush="#DDD"
					          BorderThickness="1"
					          CornerRadius="4">
						<DataGrid.Columns>
							<DataGridTextColumn Header="Date"
							                    Binding="{Binding CreatedAt, StringFormat='{}{0:MM/dd/yy HH:mm}'}"
							                    Width="110"/>
							<DataGridTextColumn Header="User"
							                    Binding="{Binding UserEmail}"
							                    Width="180"/>
							<DataGridTextColumn Header="Version"
							                    Binding="{Binding AppVersion}"
							                    Width="80"/>
							<DataGridTextColumn Header="What They Were Doing"
							                    Binding="{Binding WhatWereYouDoing}"
							                    Width="*"/>
							<DataGridTextColumn Header="Error"
							                    Binding="{Binding ErrorMessage}"
							                    Width="200"/>
						</DataGrid.Columns>
					</DataGrid>

					<TextBlock Text="{Binding BugReports.Count, StringFormat='Total Reports: {0}'}"
					           FontSize="12"
					           Foreground="#999"/>

					<!-- Selected Bug Details -->
					<Border IsVisible="{Binding SelectedBugReport, Converter={x:Static ObjectConverters.IsNotNull}}"
					        Background="#F9F9F9"
					        BorderBrush="#DDD"
					        BorderThickness="1"
					        CornerRadius="4"
					        Padding="16">
						<StackPanel Spacing="12">
							<TextBlock Text="Selected Bug Report Details"
							           FontWeight="Bold"
							           FontSize="14"/>

							<Grid ColumnDefinitions="Auto,*" RowDefinitions="Auto,Auto,Auto,Auto,Auto" ColumnSpacing="12" RowSpacing="8">
								<TextBlock Grid.Row="0" Grid.Column="0" Text="User:" FontWeight="SemiBold"/>
								<TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding SelectedBugReport.UserEmail}"/>

								<TextBlock Grid.Row="1" Grid.Column="0" Text="Restaurant:" FontWeight="SemiBold"/>
								<TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding SelectedBugReport.RestaurantName}"/>

								<TextBlock Grid.Row="2" Grid.Column="0" Text="Version:" FontWeight="SemiBold"/>
								<TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding SelectedBugReport.AppVersion}"/>

								<TextBlock Grid.Row="3" Grid.Column="0" Text="What They Were Doing:" FontWeight="SemiBold" VerticalAlignment="Top"/>
								<TextBlock Grid.Row="3" Grid.Column="1" Text="{Binding SelectedBugReport.WhatWereYouDoing}" TextWrapping="Wrap"/>

								<TextBlock Grid.Row="4" Grid.Column="0" Text="Additional Notes:" FontWeight="SemiBold" VerticalAlignment="Top"/>
								<TextBlock Grid.Row="4" Grid.Column="1" Text="{Binding SelectedBugReport.AdditionalNotes}" TextWrapping="Wrap"/>
							</Grid>

							<StackPanel IsVisible="{Binding SelectedBugReport.ErrorMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
								<TextBlock Text="Error Message:" FontWeight="SemiBold" Margin="0,8,0,4"/>
								<Border Background="#FFEBEE" Padding="8" CornerRadius="4">
									<TextBlock Text="{Binding SelectedBugReport.ErrorMessage}"
									           Foreground="#C62828"
									           TextWrapping="Wrap"
									           FontFamily="Consolas"/>
								</Border>
							</StackPanel>
						</StackPanel>
					</Border>
				</StackPanel>
			</Border>

			<!-- Quick Stats Card (Optional) -->
			<Border Background="White"
			        CornerRadius="8"
			        Padding="24"
			        BoxShadow="0 2 8 0 #10000000">
				<StackPanel Spacing="12">
					<TextBlock Text="ðŸ“Š Quick Stats"
					           FontSize="16"
					           FontWeight="SemiBold"
					           Foreground="#2D2D2D"/>

					<Grid ColumnDefinitions="*" ColumnSpacing="12" RowDefinitions="Auto">

						<Border Grid.Column="0"
						        Background="#FFF3E0"
						        CornerRadius="6"
						        Padding="12">
							<StackPanel Spacing="4" HorizontalAlignment="Center">
								<TextBlock Text="â³" FontSize="24" HorizontalAlignment="Center"/>
								<TextBlock Text="Pending Approvals"
								          FontSize="11"
								          Foreground="#666"
								          HorizontalAlignment="Center"
								          TextWrapping="Wrap"
								          TextAlignment="Center"/>
								<TextBlock Text="View All"
								          FontSize="13"
								          FontWeight="Bold"
								          Foreground="#E65100"
								          HorizontalAlignment="Center"/>
							</StackPanel>
						</Border>
					</Grid>
				</StackPanel>
			</Border>

		</StackPanel>
	</ScrollViewer>
</UserControl>
