<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:Dfc.Desktop.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="700" d:DesignHeight="500"
        x:Class="Dfc.Desktop.Views.GlobalSearchWindow"
        x:DataType="vm:GlobalSearchViewModel"
        Title="Search - Desktop Food Cost"
        Width="700"
        Height="500"
        WindowStartupLocation="CenterOwner"
        CanResize="False"
        Icon="/Assets/Images/appicon.png"
        Background="Transparent"
        TransparencyLevelHint="Blur">

	<Border Background="White"
	        CornerRadius="12"
	        BoxShadow="0 8 32 0 #40000000"
	        Margin="20">
		<Grid RowDefinitions="Auto,*,Auto">

			<!-- Search Box -->
			<Border Grid.Row="0"
			        Background="#F5F5F5"
			        CornerRadius="12,12,0,0"
			        Padding="20,16">
				<Grid ColumnDefinitions="Auto,*,Auto">
					<TextBlock Grid.Column="0"
					          Text="ðŸ”"
					          FontSize="24"
					          VerticalAlignment="Center"
					          Margin="0,0,12,0"/>
					<TextBox Grid.Column="1"
					        x:Name="SearchBox"
					        Text="{Binding SearchText}"
					        Watermark="Search ingredients, recipes, menu items..."
					        FontSize="16"
					        BorderThickness="0"
					        Background="Transparent"
					        VerticalContentAlignment="Center"/>
					<TextBlock Grid.Column="2"
					          Text="ESC to close"
					          FontSize="10"
					          Foreground="#999"
					          VerticalAlignment="Center"
					          Margin="12,0,0,0"/>
				</Grid>
			</Border>

			<!-- Results List -->
			<Border Grid.Row="1"
			        Padding="8,8,8,0">
				<Grid>
					<!-- Empty State -->
					<StackPanel IsVisible="{Binding !SearchResults.Count}"
					           VerticalAlignment="Center"
					           HorizontalAlignment="Center"
					           Spacing="12">
						<TextBlock Text="âŒ¨ï¸"
						          FontSize="48"
						          HorizontalAlignment="Center"
						          Opacity="0.5"/>
						<TextBlock Text="Start typing to search..."
						          FontSize="14"
						          HorizontalAlignment="Center"
						          Foreground="#999"/>
					</StackPanel>

					<!-- Results -->
					<ScrollViewer IsVisible="{Binding SearchResults.Count}">
						<ItemsControl ItemsSource="{Binding SearchResults}">
							<ItemsControl.ItemTemplate>
								<DataTemplate>
									<Border Background="Transparent"
									        Padding="12,8"
									        Margin="4,0"
									        CornerRadius="6"
									        PointerPressed="OnResultClicked"
									        DoubleTapped="OnResultDoubleClicked">
										<Border.Styles>
											<Style Selector="Border:pointerover">
												<Setter Property="Background" Value="#F0F7FF"/>
											</Style>
										</Border.Styles>
										<Grid ColumnDefinitions="Auto,*,Auto">
											<!-- Icon -->
											<TextBlock Grid.Column="0"
											          Text="{Binding Icon}"
											          FontSize="20"
											          VerticalAlignment="Center"
											          Margin="0,0,12,0"/>

											<!-- Name and Details -->
											<StackPanel Grid.Column="1" Spacing="2">
												<TextBlock Text="{Binding Name}"
												          FontSize="14"
												          FontWeight="SemiBold"/>
												<TextBlock Text="{Binding Details}"
												          FontSize="11"
												          Foreground="#666"/>
											</StackPanel>

											<!-- Type Badge -->
											<Border Grid.Column="2"
											        Background="#E3F2FD"
											        CornerRadius="4"
											        Padding="8,4"
											        VerticalAlignment="Center">
												<TextBlock Text="{Binding Type}"
												          FontSize="10"
												          FontWeight="SemiBold"
												          Foreground="#2196F3"/>
											</Border>
										</Grid>
									</Border>
								</DataTemplate>
							</ItemsControl.ItemTemplate>
						</ItemsControl>
					</ScrollViewer>
				</Grid>
			</Border>

			<!-- Footer -->
			<Border Grid.Row="2"
			        Background="#F5F5F5"
			        CornerRadius="0,0,12,12"
			        Padding="16,12">
				<Grid ColumnDefinitions="*,Auto">
					<StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="16">
						<TextBlock Text="â†‘â†“ Navigate"
						          FontSize="10"
						          Foreground="#666"/>
						<TextBlock Text="â†µ Open"
						          FontSize="10"
						          Foreground="#666"/>
					</StackPanel>
					<TextBlock Grid.Column="1"
					          Text="{Binding SearchResults.Count, StringFormat='{}{0} results'}"
					          FontSize="10"
					          Foreground="#999"/>
				</Grid>
			</Border>

		</Grid>
	</Border>
</Window>
