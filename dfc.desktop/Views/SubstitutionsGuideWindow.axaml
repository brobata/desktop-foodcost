<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:Dfc.Desktop.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="700" d:DesignHeight="600"
        x:Class="Dfc.Desktop.Views.SubstitutionsGuideWindow"
        x:DataType="vm:SubstitutionsGuideViewModel"
        Title="Ingredient Substitutions Guide"
        Width="700"
        Height="600"
        WindowStartupLocation="CenterOwner"
        Background="#F5F5F5">

	<Grid RowDefinitions="Auto,Auto,*,Auto" Margin="24">

		<!-- Header -->
		<StackPanel Grid.Row="0" Spacing="8" Margin="0,0,0,20">
			<TextBlock Text="ðŸ”„ Ingredient Substitutions Guide"
			          FontSize="24"
			          FontWeight="Bold"
			          Foreground="#2D2D2D"/>
			<TextBlock Text="Common ingredient substitutions and conversion ratios"
			          FontSize="14"
			          Foreground="#666"/>
		</StackPanel>

		<!-- Search -->
		<Border Grid.Row="1"
		       Background="White"
		       CornerRadius="8"
		       Padding="16"
		       Margin="0,0,0,16"
		       BoxShadow="0 2 8 0 #10000000">
			<TextBox Text="{Binding SearchText}"
			        Watermark="Search substitutions..."
			        Padding="12,10"
			        FontSize="14"/>
		</Border>

		<!-- Substitutions List -->
		<Border Grid.Row="2"
		       Background="White"
		       CornerRadius="8"
		       Padding="20"
		       BoxShadow="0 2 8 0 #10000000">
			<ScrollViewer VerticalScrollBarVisibility="Auto">
				<ItemsControl ItemsSource="{Binding FilteredSubstitutions}">
					<ItemsControl.ItemTemplate>
						<DataTemplate>
							<Border BorderBrush="#E0E0E0"
							       BorderThickness="0,0,0,1"
							       Padding="0,12">
								<StackPanel Spacing="8">
									<!-- Original Ingredient -->
									<TextBlock Text="{Binding OriginalIngredient}"
									          FontSize="16"
									          FontWeight="SemiBold"
									          Foreground="#2D2D2D"/>

									<!-- Substitutes -->
									<ItemsControl ItemsSource="{Binding Substitutes}">
										<ItemsControl.ItemTemplate>
											<DataTemplate>
												<Border Background="#F5F5F5"
												       CornerRadius="4"
												       Padding="12,8"
												       Margin="0,4,0,0">
													<Grid ColumnDefinitions="*,Auto">
														<TextBlock Grid.Column="0"
														          FontSize="14"
														          Foreground="#2D2D2D"
														          TextWrapping="Wrap">
															<Run Text="â†’ " Foreground="#7AB51D" FontWeight="SemiBold"/>
															<Run Text="{Binding Substitute}"/>
														</TextBlock>
														<TextBlock Grid.Column="1"
														          Text="{Binding Ratio}"
														          FontSize="12"
														          Foreground="#1976D2"
														          FontWeight="Medium"
														          VerticalAlignment="Center"
														          Margin="12,0,0,0"/>
													</Grid>
												</Border>
											</DataTemplate>
										</ItemsControl.ItemTemplate>
									</ItemsControl>

									<!-- Notes -->
									<TextBlock Text="{Binding Notes}"
									          FontSize="12"
									          Foreground="#666"
									          FontStyle="Italic"
									          TextWrapping="Wrap"
									          IsVisible="{Binding !!Notes}"
									          Margin="0,4,0,0"/>
								</StackPanel>
							</Border>
						</DataTemplate>
					</ItemsControl.ItemTemplate>
				</ItemsControl>
			</ScrollViewer>
		</Border>

		<!-- Buttons -->
		<StackPanel Grid.Row="3"
		           Orientation="Horizontal"
		           HorizontalAlignment="Right"
		           Spacing="12"
		           Margin="0,20,0,0">
			<Button Content="Close"
			       Click="OnCloseClick"
			       Background="#90A4AE"
			       Foreground="White"
			       Padding="24,10"
			       CornerRadius="4"
			       FontWeight="SemiBold"
			       FontSize="14"/>
		</StackPanel>

	</Grid>
</Window>
