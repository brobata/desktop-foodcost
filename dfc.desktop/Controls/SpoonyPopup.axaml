<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="using:Dfc.Desktop.Controls"
             x:Class="Dfc.Desktop.Controls.SpoonyPopup"
             x:DataType="local:SpoonyViewModel"
             IsVisible="{Binding IsVisible}">

    <Border Margin="0,0,24,24"
            HorizontalAlignment="Right"
            VerticalAlignment="Bottom">

        <!-- Main Spoony Container with entrance animation -->
        <Border Background="White"
                CornerRadius="12"
                Padding="16"
                BoxShadow="0 4 16 0 #40000000"
                Width="320">
            <StackPanel Spacing="12">

                <!-- Header with Spoony avatar and title -->
                <Grid ColumnDefinitions="Auto,*,Auto">
                    <!-- Spoony Avatar - Full Image -->
                    <Border Grid.Column="0"
                            Width="128"
                            Height="128"
                            Margin="0,0,12,0">
                        <Image Source="avares://Dfc.Desktop/Assets/Images/spoony.png"
                               Stretch="Uniform"
                               Width="128"
                               Height="128"/>
                    </Border>

                    <!-- Title -->
                    <TextBlock Grid.Column="1"
                              Text="{Binding Title}"
                              FontSize="14"
                              FontWeight="Bold"
                              Foreground="#2D2D2D"
                              TextWrapping="Wrap"
                              VerticalAlignment="Center"/>

                    <!-- Close Button -->
                    <Button Grid.Column="2"
                            Content="Ã—"
                            FontSize="20"
                            Width="24"
                            Height="24"
                            Padding="0"
                            Background="Transparent"
                            BorderThickness="0"
                            Foreground="#999"
                            HorizontalContentAlignment="Center"
                            VerticalContentAlignment="Center"
                            Command="{Binding CloseCommand}">
                        <Button.Styles>
                            <Style Selector="Button:pointerover">
                                <Setter Property="Foreground" Value="#EF5350"/>
                            </Style>
                        </Button.Styles>
                    </Button>
                </Grid>

                <!-- Message -->
                <TextBlock Text="{Binding Message}"
                          TextWrapping="Wrap"
                          FontSize="13"
                          Foreground="#666"
                          LineHeight="20"
                          Margin="60,0,0,0"/>

                <!-- Action Button (optional) -->
                <Button Content="{Binding ActionButtonText}"
                        Command="{Binding ActionCommand}"
                        IsVisible="{Binding HasAction}"
                        Background="#7AB51D"
                        Foreground="White"
                        Padding="16,10"
                        CornerRadius="6"
                        FontSize="13"
                        FontWeight="SemiBold"
                        HorizontalContentAlignment="Center"
                        Margin="60,0,0,0"/>

            </StackPanel>
        </Border>
    </Border>

</UserControl>
